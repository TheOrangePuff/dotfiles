#!/bin/bash

### Variables

BROWSER='Firefox'
WALLPAPER=$HOME/Wallpapers/foggy_forest.jpg
HOSTNAME=$(cat /etc/hostname)

wal --theme base16-gruvbox-hard
feh --bg-fill $WALLPAPER
$HOME/.screenlayout/default.sh
$HOME/.config/polybar/startup.sh

### Configure bspwm

bspc config border_width         2
bspc config window_gap          12

bspc config split_ratio          0.52
bspc config borderless_monocle   true
bspc config gapless_monocle      true

# Rules
# Remove all the rules
bspc rule -r "*"

# Put discord in my chat desktop
bspc rule -a discord desktop='Chat'

# Put steam onto the steam desktop
bspc rule -a Steam desktop='Steam' follow=on focus=on

# Put the first instance of my browser on my browser main desktop
bspc rule -a $BROWSER -o desktop='Browser Main'

# Put remote desktop windows goto the VM desktop
bspc rule -a "rdesktop" desktop='VM'

# Set zathura to tiled mode
bspc rule -a Zathura state=tiled

# source the colors.
. "${HOME}/.cache/wal/colors.sh"

# Set the border colors.
bspc config normal_border_color "$color8"
bspc config active_border_color "$color12"
bspc config focused_border_color "$color2"

# Configure desktops
$HOME/.config/bspwm/desktops.sh

### Auto start programs

$HOME/.screenlayout/default.sh &
$HOME/.config/polybar/startup.sh &

# Start all programs
if ! pgrep "sxhkd" > /dev/null
then
	sxhkd &
fi
if ! pgrep "picom" > /dev/null
then
	picom &
fi
if ! pgrep -x "redshift" > /dev/null
then
	redshift &
fi
if ! pgrep "dunst" > /dev/null
then
	dunst &
fi

discord &

# Auto suspend after 15 minutes
xautolock -time 15 -locker "systemctl suspend" -detectsleep -corners +00- &

# Set wmname (make Java swing applications work)
wmname LG3D

###

